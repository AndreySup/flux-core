\documentclass[default,pdf,colorBG,slideColor]{prosper}
\usepackage{epsfig}
\usepackage{pstricks}
\usepackage{graphicx}

\graphicspath{ {../fig/} }

\title{Next Generation Resource Manager}
\subtitle{{\small high level technical review}}
\author{Dong Ahn, Jim Garlick, Mark Grondona, Don Lipari}
\email{{\rm \{ahn1,garlick,mgrondona,lipari\}@llnl.gov}}
\institution{Livermore Computing \\
             Lawrence Livermore National Laboratory}

\newcommand{\ngrm}{NGRM}
\newcommand{\zMQ}{\O{}MQ}

\slideCaption{\ngrm\ High Level Review, Mar. 4, 2013}

\Logo(-1,-1){\epsfig{file=graphic/iccd_logotrans.ps,scale=0.15}}

%\Logo{\includegraphics[scale=0.15]{iccd_logotrans.ps}}

\newif\ifbigpic
\bigpictrue


\begin{document}

% ==========================================================================
\maketitle
% ==========================================================================
\begin{slide}{Session Overview}{\small
We will roughly follow the outline of the {\em Vision} document.\\
\begin{itemize}
  \item[\S1-4]{{\em overview} (Jim)}
  \item[\S5]{{\em comms framework} (Jim)}
  \item[\S6.1-6]{{\em resource management} (Mark)}
  \item[\S6.7]{{\em scheduler} (Don)}
  \item[\S7]{{\em monitoring} (Jim)}
  \item[\S8]{{\em runtime} (Dong)}
\end{itemize}
We expect to address your questions and comments as we go.
}\end{slide}
% ==========================================================================
\part{overview}
% ==========================================================================
\begin{slide}{Emerging Challenges for RM}{\small
\begin{itemize}
  \item{extreme scalability}
  \item{low noise}
  \item{fault tolerance}
  \item{heterogeneity (GPUs, FPGA, special nodes)}
  \item{new resource types (power, I/O)}
  \item{code devel/debug complexity}
  \item{new workloads (high job throughput, UQ, exascale)}
\end{itemize}
Failure to adapt will harm user productivity.
}\end{slide}
% ==========================================================================
\begin{slide}{Could Slurm be Adapted?}{\small
We think not.
\begin{itemize}
  \item{older paradigm: monolithic controller, node-scheduled}
  \item{minimal runtime support (env vars, libslurm, libpmi, MPIR)}
  \item{scalability limitations}
  \item{comprehensive redesign overdue}
  \item{need center-wide RM to manage simulation ensembles, I/O, viz, etc}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{Vision and New Capabilities}{\small
\begin{itemize}
  \item{center as a cluster}
  \item{diverse compute resources}
  \item{data provenance and reproduceability}
  \item{low noise}
  \item{fault tolerance}
  \item{security}
  \item{research and tool friendly}
  \item{extensibility}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{Design Challenges}{\small
\begin{minipage}{0.47\textwidth}
\begin{itemize}
  \item{multidimensional scale}
  \item{diverse workload}
  \item{dynamic workload}
  \item{power}
  \item{scheduling}
\end{itemize}
\end{minipage}
\begin{minipage}{0.47\textwidth}
\begin{itemize}
  \item{backwards compatibility}
  \item{integration risk}
  \item{higher downtime costs}
  \item{separation-of-concerns}
  \item{security}
  \item{productivity}
\end{itemize}
\end{minipage}
}\end{slide}
% ==========================================================================
\begin{slide}{New Conceptual Models}{\small
\begin{itemize}
  \item{unified job}
  \item{job hierarchy}
  \item{generalized resource}
  \item{resource allocation elasticity}
  \item{common scalable infrastructure}
  \item{self-hosting}
  \item{lightweight virtualization}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{\ngrm\ Job Attributes (1/2)}{\small
\begin{itemize}
  \item{job owner and users allowed to run and/or submit jobs;\\
	owners can "invite" debug help or coordinate DAT}
  \item{RM instance with resource subset, topology, etc}
  \item{scheduler to accept and schedule new jobs,\\
	scheduler plugin selectable by owner}
  \item{job DB recording new, running, completed child jobs;\\
	job\&res DBs "reaped" like UNIX processes at job exit}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{\ngrm\ Job Attributes (2/2)}{\small
\begin{itemize}
  \item{isolated communications framework with parent gateway}
  \item{runtime environment for launching parallel apps \& tools}
  \item{interactive node for batch scripts/user logins}
  \item{resolvable domain name based on unique jobid,\\
	ssh to job, point web browser at job}
  \item{local monitoring domain, user configurable}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{Lightweight Jobs (LWJ)}{\small
\begin{itemize}
  \item{LWJ is a job sharing parent RM instance,
	communications framework, etc}
  \item{optimizes base case of allocate \& launch MPI job}
  \item{covers co-located work like tool processes}
  \item{regular jobs $\sim$ UNIX processes; LWJ $\sim$ UNIX threads}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{job 0 spans all resources}{\small
\ifbigpic
\begin{center}
  \includegraphics[scale=0.50]{job-hierarchy-job0}
\end{center}
\fi
}\end{slide}
% ==========================================================================
\begin{slide}{job 0.x on cluster 2}{\small
\ifbigpic
\begin{center}
  \includegraphics[scale=0.50]{job-hierarchy-job0-x}
\end{center}
\fi
}\end{slide}
% ==========================================================================
\begin{slide}{job 0.x.y on nodes n1-5}{\small
\ifbigpic
\begin{center}
  \includegraphics[scale=0.50]{job-hierarchy-job0-x-y}
\end{center}
\fi
}\end{slide}
% ==========================================================================
\begin{slide}{2 LWJs on node n5}{\small
\ifbigpic
\begin{center}
  \includegraphics[scale=0.50]{job-hierarchy-lwj}
\end{center}
\fi
}\end{slide}
% ==========================================================================
\begin{slide}{Project Thrust Areas}{\small
\textbf{Comms Framework:}
    common scalable infrastrucure model for \ngrm\ components\\
\vspace{0.5cm}
\textbf{Resource Management:}
    config, scheduling, tracking of resources, jobs and users\\
\vspace{0.5cm}
\textbf{Monitoring:}
    scalable resource health monitoring, fault notification, logging\\
\vspace{0.5cm}
\textbf{Runtime:}
    support for application runtime, tools, process management, etc.
}\end{slide}
% ==========================================================================
\part{comms framework}
% ==========================================================================
\begin{slide}{Comms Framework Goals}{\small
\begin{itemize}
  \item{Build a foundation for \ngrm\ distributed components.}
  \item{A {\em comms session} contains each \ngrm\ job, and \\
	job hierarchy $\sim$ comms session hierarchy}
  \item{Rich comms within a session,\\
	No direct comms between sibling sessions,\\
        Limited comms between parent-child (through gateway)}
  \item{Parent session can create, resize, destory child sessions}
  \item{Comms consists of four layers...}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{Comms Framework Layers}{\small
\begin{center}
  \includegraphics[scale=0.20]{comms}
\end{center}
\begin{itemize}
  \item{Layering is not rigid\\
        \ngrm\ components not overly constrained}
  \item{Bottom two layers are mostly off-the-shelf}
  \item{Generality reflects early phase of project in which it was conceived}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{Internet Protocols and Services}{\small
\begin{itemize}
  \item{Fully routed IP networks, e.g. route cluster management
	ethernets and IP-over-IB together}
  \item{Dynamic IP assignment, including multicast}
  \item{Private DNS, each session has a name, e.g. {\tt s2.s400.\ngrm.}}
  \item{Possibility for VPN isolation between jobs}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{Comms Toolkit}{\small
\begin{center}
  \includegraphics[scale=0.20]{commstk}
\end{center}
\begin{itemize}
  \item{Message handling (2 options)}
  \item{Security (2 options)}
  \item{Message encoding (2 options)}
\end{itemize}
}\end{slide}
% ==========================================================================
\begin{slide}{Message Handling}{\small
  \hfill
  \begin{minipage}{0.5\textwidth}
  {\bf \zMQ}
  \begin{itemize}
    \item{req-rep, pub-sub, push-pull}
    \item{PGM (reliable multicast)}
    \item{multipart message handling}
    \item{support for broker construction}
    \item{user space library}
  \end{itemize}
  \begin{center}
    \begin{minipage}[b]{0.15\linewidth}
    \includegraphics[scale=0.08]{comms_zmq_reqrep}
    \end{minipage}
    \hspace{0.2cm}
    \begin{minipage}[b]{0.3\linewidth}
    \includegraphics[scale=0.08]{comms_zmq_pubsub}
    \end{minipage}
    \hspace{0.2cm}
    \begin{minipage}[b]{0.3\linewidth}
    \includegraphics[scale=0.08]{comms_zmq_pushpull}
    \end{minipage}
  \end{center}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
  {\bf SCTP}
  \begin{itemize}
    \item{message oriented}
    \item{transparent multi-homing}
    \item{multi-streaming}
    \item{N-to-1 associations}
    \item{HMAC check option}
    \item{IETF, in Linux kernel}
  \end{itemize}
  \begin{center}
  \includegraphics[scale=0.10]{comms_sctp}
  \end{center}
  \end{minipage}
  \hfill
}\end{slide}
% ==========================================================================
\begin{slide}{Security}{\small
  \hfill
  \begin{minipage}{0.5\textwidth}
  {\bf session security context}
  \begin{itemize}
    \item{key assigned by parent}
    \item{integrity, privacy for all}
    \item{parent knows child's key}
    \item{child forgets parent's key}
    \item{useful for pub-sub}
    \item{assumes trust within session}
  \end{itemize}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
  {\bf MUNGE}
  \begin{itemize}
    \item{key assigned out of band (don't ask)}
    \item{privileged munge daemon signs messages}
    \item{authenticates sender}
    \item{integrity, privacy of payload possible}
  \end{itemize}
  \end{minipage}
  \hfill
}\end{slide}
% ==========================================================================
\begin{slide}{Message Encoding}{\small
  \hfill
  \begin{minipage}{0.5\textwidth}
  {\bf JSON}
  \begin{itemize}
    \item{generated on the fly}
    \item{many language bindings}
    \item{human readable}
    \item{easily extended}
    \item{space-inefficient}
    \item{slow}
  \end{itemize}
  \end{minipage}
  \hfill
  \begin{minipage}{0.45\textwidth}
  {\bf Protocol Buffers}
  \begin{itemize}
    \item{compiled from IDL}
    \item{fewer supported languages}
    \item{machine readable}
    \item{must design for revision}
    \item{space-efficient}
    \item{fast}
  \end{itemize}
  \end{minipage}
  \hfill
}\end{slide}
% ==========================================================================
\begin{slide}{Comms Message Broker (CMB)}{\small
FIXME!
}\end{slide}
% ==========================================================================
\begin{slide}{Reduction Network}{\small
FIXME!
}\end{slide}
% ==========================================================================
\part{resource management}
\part{scheduler}
\part{monitoring}
\part{runtime}
% ==========================================================================
\end{document}
